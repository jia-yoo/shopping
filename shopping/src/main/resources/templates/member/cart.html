<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<style>
img{
	width:100px;
	height:100px;
}
</style>
</head>
<body>
<header>
	<nav>
		<a href="/"><img id="logo" style="width:50px; height:50px;" src="/img/logo.jpg"></a>
		<a href="/user/shop">shop</a>
		<div class="cart-wrap" onclick="location.href='/member/cart'">
			<div class="cart-image">
				<img style="width:50px; height:50px;" src="/img/shopping_cart.png">
			</div>
			<div  class="cart-text">
				<span>0</span>
			</div>
		</div>
		<th:block th:if="${session.id == null}">
			<a href="/member/mem_regForm">íšŒì›ê°€ì…í•˜ê¸°</a>
			<a href="/member/login">ë¡œê·¸ì¸í•˜ê¸°</a>
		</th:block>
		<th:block th:if="${session.id != null}">
			<span>[[${session.id}]] ë‹˜ ì–´ì„œì˜¤ì„¸ìš” ğŸ˜‰<span>
			<a href="/member/logout">ë¡œê·¸ì•„ì›ƒí•˜ê¸°</a>
			<a href="/member/myPage">ë§ˆì´í˜ì´ì§€</a>
		</th:block>
		<a href="/admin/admin_main">ê´€ë¦¬ìí˜ì´ì§€ë¡œê°€ê¸°</a>
	</nav>
</header>
<main>
	<h1>cart í™”ë©´</h1>
	<table>
		<tr>
			<th>checkAll</th>
			<th>ìƒí’ˆ ì‚¬ì§„</th>
			<th>ìƒí’ˆëª…</th>
			<th>ìƒí’ˆ ìˆ˜ëŸ‰</th>
			<th>ìƒí’ˆ ê°€ê²©</th>
			<th>ì´ ê°€ê²©</th>
			<th>ì‚­ì œ</th>
		</tr>
		<tr th:each="cartList : ${cartList}">
			<td><input type="checkbox"></td>
			<td><img th:src="@{|/images/user/${cartList.product.fileName}|}"></td>
			<td>[[${cartList.product.pName}]]</td>
			<td>
			<span id="dec">â—€</span><span id="orderQuan">[[${cartList.cQuan}]]</span><span id="inc">â–¶</span>
			</td>
			<td>[[${cartList.product.pPrice}]]</td>
			<td th:text="${#numbers.formatInteger(cartList.cQuan * cartList.product.pPrice, 0)}"></td>
			<td class="deleteBtns">âŒ</td>
			<td style="display:none;" id="pno">[[${cartList.product.pno}]]</td>
		</tr>
	
	</table>
</main>

<script th:inline="javascript">


const decBtn = document.querySelector("#dec");
const incBtn = document.querySelector("#inc");
const orderQuanEl = document.querySelector("#orderQuan");
const deleteBtns = document.querySelectorAll(".deleteBtns");

decBtn.addEventListener("click", function(e){
	let orderQuan = Number(orderQuanEl.innerText);
	orderQuan--;
	if(orderQuan > 0){
		orderQuanEl.innerHTML = orderQuan;
	}
})
incBtn.addEventListener("click", function(e){
	let orderQuan = Number(orderQuanEl.innerText);
	orderQuan++;
	if(orderQuan > 1){
		orderQuanEl.innerHTML = orderQuan;
	}
})
deleteBtns.forEach(btn=>{
	btn.addEventListener("click", function(e){
	let pno = e.target.parentElement.querySelector("#pno").innerText;
	location.href="/member/deleteFromCart?pno="+pno;
})
})
</script>

</body>
</html>